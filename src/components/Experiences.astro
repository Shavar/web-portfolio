---
import type { Experience } from '@/types';
import ExperienceSingle from './ExperienceSingle.astro';
import experiences from '@/data/experience.json';
import styles from '@/data/commonClasses.json';

interface Props {
  // No props needed for this component
}

const formatDateRange = (startDate: string, endDate: string): string => {
  const formatDate = (dateString: string): string => {
    if (dateString.toLowerCase() === 'present') {
      return 'Present';
    }

    const date = new Date(dateString);
    const monthNames = [
      'Jan.',
      'Feb.',
      'Mar.',
      'Apr.',
      'May',
      'Jun.',
      'Jul.',
      'Aug.',
      'Sep.',
      'Oct.',
      'Nov.',
      'Dec.',
    ];

    return `${monthNames[date.getMonth()]} ${date.getFullYear()}`;
  };

  return `${formatDate(startDate)} â€” ${formatDate(endDate)}`;
};

const workExperiences = experiences.workExperience;
const educationExperiences = experiences.education;
---

<section class="max-w-6xl mx-auto px-6 mb-32">
  <div class="border-t border-zinc-200 dark:border-zinc-800 pt-12">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8 mb-20">
      <div class="md:col-span-3">
        <h2 class={`${styles.preHeading} sticky top-24`}>Work History</h2>
      </div>
      <div class="md:col-span-9 space-y-12">
        {
          workExperiences.map((job: Experience) => (
            <ExperienceSingle
              title={job.title}
              company={job.company}
              date={formatDateRange(job.startDate, job.endDate)}
              details={job.details}
            />
          ))
        }
      </div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
      <div class="md:col-span-3">
        <h2 class={`${styles.preHeading} sticky top-24`}>Education</h2>
      </div>
      <div class="md:col-span-9 space-y-12">
        {
          educationExperiences.map((education: Experience) => (
            <ExperienceSingle
              title={education.title}
              company={education.company}
              date={formatDateRange(education.startDate, education.endDate)}
              details={education.details}
            />
          ))
        }
      </div>
    </div>
  </div>
</section>
