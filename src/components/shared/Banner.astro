---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import SectionHeader from '@/components/shared/SectionHeader.astro';
import Button from '@/components/shared/Button.astro';
import styles from '@/data/styles.json';

interface Props {
  preheading?: string;
  heading: string;
  description: string;
  heroImage?: ImageMetadata;
  heroLayout: 'standard' | 'hero';
}

const { preheading, heading, description, heroImage, heroLayout = 'standard' } = Astro.props;
---

{
  heroLayout === 'hero' && heroImage ? (
    <section class="relative flex items-center overflow-hidden pb-24 pt-6" id="hero">
      <div
        class={`${styles.container} flex w-full flex-row-reverse items-center gap-8 lg:flex-row`}
      >
        <div class="w-2/3">
          <div class="max-w-xl">
            <SectionHeader
              headingLevel="h1"
              preHeading="Senior Frontend Developer"
              heading={['Shavar Sean', 'Cox']}
            />
            <p class={styles.secondaryText}>
              With over 8 years of experience, I specialize in building accessible, high-performance
              web applications. Currently based in Toronto, I focus on delivering scalable
              architectures and clean code that transform complex problems into effortless user
              experiences.
            </p>
          </div>
          <div class="flex flex-wrap gap-4 pt-4">
            <Button style="primary" href="#work">
              View Recent Work
            </Button>
            <Button style="secondary" href="#contact">
              Get in Touch
            </Button>
          </div>
        </div>
        <div class="relative flex w-1/3 justify-center lg:justify-end">
          <div class="absolute inset-0 rotate-3 rounded-lg bg-gradient-to-tr from-zinc-200 to-transparent transition-transform duration-500 group-hover:rotate-6 dark:from-zinc-800" />
          <div class="absolute inset-0 -rotate-2 rounded-lg border-2 border-zinc-900 opacity-10 transition-opacity duration-500 group-hover:opacity-20 dark:border-white" />
          <Image
            src={heroImage}
            alt="Portrait of Shavar"
            format="webp"
            quality={85}
            loading="eager"
            densities={[1, 2]}
            class="relative h-[500px] w-full rotate-2 rounded-lg object-cover shadow-2xl transition-all duration-700 hover:rotate-0"
          />
        </div>
      </div>
    </section>
  ) : (
    <section id="intro" class="relative">
      {heroImage && (
        <>
          <Image
            src={heroImage}
            alt="Background"
            class="absolute inset-0 -z-10 h-full w-full object-cover"
          />
          <div class="bg-background-primary absolute inset-0 opacity-15" />
        </>
      )}

      <div class:list={[styles.container, { 'pt-64': heroImage }, 'pb-8']}>
        <div class="flex flex-col items-start text-left">
          {preheading && <span class={styles.preHeading}>{preheading}</span>}
          <h1 class={styles.heading}>{heading}</h1>
          <p class={styles.secondaryText}>{description}</p>
        </div>
      </div>
    </section>
  )
}
